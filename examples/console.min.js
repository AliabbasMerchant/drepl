(function(){var g=document.getElementById("terminal");var h=[];try{h=JSON.parse(localStorage.history)}catch(f){}var c=h.length;var i;var k=location.protocol.replace("http","ws")+"//"+location.hostname+(location.port?":"+location.port:"")+"/ws/dmd";var b=new WebSocket(k);function a(n){n=n||window.event;switch(n.keyCode||n.which){case 38:if(c==h.length){i=this.value}if(c>0){this.value=h[--c]}break;case 40:if(c<h.length){if(++c==h.length){this.value=i}else{this.value=h[c]}}break;case 13:case 14:this.disabled=true;this.style.opacity=0.5;h.push(this.value);c=h.length;try{var m=h.slice(Math.max(0,h.length-100));localStorage.history=JSON.stringify(m)}catch(l){}b.send(this.value);break;default:return}n.preventDefault?n.preventDefault():n.returnValue=false}function e(l){var m=document.createElement("div");m.classList.add("line");m.innerHTML='<span class="text-info">'+l+'</span><input type="text" class="text-info" size="80">';var n=m.lastChild;n.onkeydown=a;g.appendChild(m);g.onclick=function(){n.focus()};n.focus()}function j(m,l){var n=document.createElement("div");n.innerHTML='<span class="text-'+m+'">'+l+"</span>";g.appendChild(n)}b.onopen=function(l){e("D> ")};b.onmessage=function(n){var o=JSON.parse(n.data),l="D>&nbsp;";switch(o[0]){case"incomplete":l="&nbsp;|&nbsp;";break;case"success":for(var m=1;m<o.length;++m){j("success","=> "+o[m])}break;case"error":for(var m=1;m<o.length;++m){j("danger","=> "+o[m])}break}e(l)};var d=false;b.onerror=function(l){j("danger","A WebSocket error occured '"+l.data+"'.")};b.onclose=function(l){j("warning","Lost the connection to the server.")}})();
